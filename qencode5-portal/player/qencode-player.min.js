/*! qencode-player 2020-03-25*/

function addToTestJig(e){}Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),o=t.length,n=new Array(o);o--;)n[o]=[t[o],e[t[o]]];return n}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}();var qcolor={};function qHexToRGB(e){function t(e){return parseInt("0x"+e)}if("string"==typeof e&&e.match(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i))return 4===e.length&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),{r:t(e.substring(1,3)),g:t(e.substring(3,5)),b:t(e.substring(5,7))}}function qColorAlphaToRGBA(e,t){if(!("string"!=typeof e||e.length<1)){var o;if("#"!==e[0]||4!==e.length&&7!==e.length){var n=qcolor[e];if(!n)return;o=qHexToRGB(n)}else o=qHexToRGB(e);if(void 0!==o)return"number"==typeof t&&0<=t&&t<=1?"rgba("+o.r+","+o.g+","+o.b+","+t+")":"rgb("+o.r+","+o.g+","+o.b+")"}}qcolor.aliceblue="#f0f8ff",qcolor.antiquewhite="#faebd7",qcolor.aqua="#00ffff",qcolor.aquamarine="#7fffd4",qcolor.azure="#f0ffff",qcolor.beige="#f5f5dc",qcolor.bisque="#ffe4c4",qcolor.black="#000000",qcolor.blanchedalmond="#ffebcd",qcolor.blue="#0000ff",qcolor.blueviolet="#8a2be2",qcolor.brown="#a52a2a",qcolor.burlywood="#deb887",qcolor.cadetblue="#5f9ea0",qcolor.chartreuse="#7fff00",qcolor.chocolate="#d2691e",qcolor.coral="#ff7f50",qcolor.cornflowerblue="#6495ed",qcolor.cornsilk="#fff8dc",qcolor.crimson="#dc143c",qcolor.cyan="#00ffff",qcolor.darkblue="#00008b",qcolor.darkcyan="#008b8b",qcolor.darkgoldenrod="#b8860b",qcolor.darkgray="#a9a9a9",qcolor.darkgreen="#006400",qcolor.darkgrey="#a9a9a9",qcolor.darkkhaki="#bdb76b",qcolor.darkmagenta="#8b008b",qcolor.darkolivegreen="#556b2f",qcolor.darkorange="#ff8c00",qcolor.darkorchid="#9932cc",qcolor.darkred="#8b0000",qcolor.darksalmon="#e9967a",qcolor.darkseagreen="#8fbc8f",qcolor.darkslateblue="#483d8b",qcolor.darkslategray="#2f4f4f",qcolor.darkslategrey="#2f4f4f",qcolor.darkturquoise="#00ced1",qcolor.darkviolet="#9400d3",qcolor.deeppink="#ff1493",qcolor.deepskyblue="#00bfff",qcolor.dimgray="#696969",qcolor.dimgrey="#696969",qcolor.dodgerblue="#1e90ff",qcolor.firebrick="#b22222",qcolor.floralwhite="#fffaf0",qcolor.forestgreen="#228b22",qcolor.fuchsia="#ff00ff",qcolor.gainsboro="#dcdcdc",qcolor.ghostwhite="#f8f8ff",qcolor.gold="#ffd700",qcolor.goldenrod="#daa520",qcolor.gray="#808080",qcolor.green="#008000",qcolor.greenyellow="#adff2f",qcolor.grey="#808080",qcolor.honeydew="#f0fff0",qcolor.hotpink="#ff69b4",qcolor.indianred="#cd5c5c",qcolor.indigo="#4b0082",qcolor.ivory="#fffff0",qcolor.khaki="#f0e68c",qcolor.lavender="#e6e6fa",qcolor.lavenderblush="#fff0f5",qcolor.lawngreen="#7cfc00",qcolor.lemonchiffon="#fffacd",qcolor.lightblue="#add8e6",qcolor.lightcoral="#f08080",qcolor.lightcyan="#e0ffff",qcolor.lightgoldenrodyellow="#fafad2",qcolor.lightgray="#d3d3d3",qcolor.lightgreen="#90ee90",qcolor.lightgrey="#d3d3d3",qcolor.lightpink="#ffb6c1",qcolor.lightsalmon="#ffa07a",qcolor.lightseagreen="#20b2aa",qcolor.lightskyblue="#87cefa",qcolor.lightslategray="#778899",qcolor.lightslategrey="#778899",qcolor.lightsteelblue="#b0c4de",qcolor.lightyellow="#ffffe0",qcolor.lime="#00ff00",qcolor.limegreen="#32cd32",qcolor.linen="#faf0e6",qcolor.magenta="#ff00ff",qcolor.maroon="#800000",qcolor.mediumaquamarine="#66cdaa",qcolor.mediumblue="#0000cd",qcolor.mediumorchid="#ba55d3",qcolor.mediumpurple="#9370db",qcolor.mediumseagreen="#3cb371",qcolor.mediumslateblue="#7b68ee",qcolor.mediumspringgreen="#00fa9a",qcolor.mediumturquoise="#48d1cc",qcolor.mediumvioletred="#c71585",qcolor.midnightblue="#191970",qcolor.mintcream="#f5fffa",qcolor.mistyrose="#ffe4e1",qcolor.moccasin="#ffe4b5",qcolor.navajowhite="#ffdead",qcolor.navy="#000080",qcolor.oldlace="#fdf5e6",qcolor.olive="#808000",qcolor.olivedrab="#6b8e23",qcolor.orange="#ffa500",qcolor.orangered="#ff4500",qcolor.orchid="#da70d6",qcolor.palegoldenrod="#eee8aa",qcolor.palegreen="#98fb98",qcolor.paleturquoise="#afeeee",qcolor.palevioletred="#db7093",qcolor.papayawhip="#ffefd5",qcolor.peachpuff="#ffdab9",qcolor.peru="#cd853f",qcolor.pink="#ffc0cb",qcolor.plum="#dda0dd",qcolor.powderblue="#b0e0e6",qcolor.purple="#800080",qcolor.rebeccapurple="#663399",qcolor.red="#ff0000",qcolor.rosybrown="#bc8f8f",qcolor.royalblue="#4169e1",qcolor.saddlebrown="#8b4513",qcolor.salmon="#fa8072",qcolor.sandybrown="#f4a460",qcolor.seagreen="#2e8b57",qcolor.seashell="#fff5ee",qcolor.sienna="#a0522d",qcolor.silver="#c0c0c0",qcolor.skyblue="#87ceeb",qcolor.slateblue="#6a5acd",qcolor.slategray="#708090",qcolor.slategrey="#708090",qcolor.snow="#fffafa",qcolor.springgreen="#00ff7f",qcolor.steelblue="#4682b4",qcolor.tan="#d2b48c",qcolor.teal="#008080",qcolor.thistle="#d8bfd8",qcolor.tomato="#ff6347",qcolor.turquoise="#40e0d0",qcolor.violet="#ee82ee",qcolor.wheat="#f5deb3",qcolor.white="#ffffff",qcolor.whitesmoke="#f5f5f5",qcolor.yellow="#ffff00",qcolor.yellowgreen="#9acd32",function(){"use strict";var t="vjscustomstyle";function o(e){var t="";for(var o in e){for(var n in t+=o+"{",e[o])t+=n+":"+e[o][n]+";";t+="}"}return t}function r(e){if(!e)throw new Error("instanceId must be defined");return t+e}function e(){this._rules={}}e.prototype.appendRule=function(e,t,o){if(!e)throw new Error("selector must be defined");if(!t||"undefined"===t)throw new Error("instanceId must be defined");if(!o)throw new Error("ruleObj must be defined");var n=e.replace(/\.video-js/g,function(e){return".video-js.qencode-player-instance-"+e}(t));this._rules[n]=o},e.prototype.load=function(e){!function(e){return!!document.getElementById(r(e))}(e)&&function(e,t){var o=document.getElementById("vjscustomstyleimmediate");o&&o.remove();var n=document.createElement("style");n.setAttribute("id",r(t)),n.type="text/css",n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n)}(function(e,t){return o(videojs.mergeOptions(e,t))}(function(){var e={".video-js":{"font-size":"15px"},".video-js .vjs-control-bar":{"background-color":"rgba(0, 0, 0, 0.2)"},".video-js .vjs-quality-button .vjs-icon-placeholder":{"font-family":"VideoJS","font-weight":"normal","font-style":"normal"},".vjs-quality-button .vjs-icon-placeholder:before":{content:'"\\f110"'},".video-js .vjs-quality-wrapper .vjs-menu .vjs-menu-content":{"z-index":"999"},".video-js .vjs-quality-wrapper .vjs-menu .vjs-menu-item-text":{"text-transform":"none"}};return e}(),this._rules),e)},e.prototype.unload=function(e,t){var o=document.getElementById(r(t));o&&o.remove(),e||(this._rules={})},window.qencodeCssRegistry=new e}(),function(){"use strict";var o,e="qencodeBigPlayButton";if(void 0===window.videojs)throw new Error("videojs not found");(o=videojs).getPlugin(e)||o.registerPlugin(e,function(e){var t=o.mergeOptions(e);if(void 0===window.qencodeCssRegistry)throw new Error("CSS registry not found");window.qencodeCssRegistry.appendRule(".video-js .vjs-big-play-button",t.instanceId,{"font-size":"35px",top:"50%",left:"50%","margin-top":"-0.75em","margin-left":"-1em",width:"2em","background-color":"#3270eb",border:"0px",color:"white","line-height":"1.55em"}),window.qencodeCssRegistry.appendRule(".video-js:hover .vjs-big-play-button, .video-js .vjs-big-play-button:focus",t.instanceId,{"background-color":"#265cc5"}),window.qencodeCssRegistry.appendRule(".video-js .vjs-big-play-button .vjs-icon-placeholder::before",t.instanceId,{"font-family":'"qencode"',content:'"Q"'})})}(),function(){"use strict";var t,e="qencodeAnalytics";if(void 0===window.videojs)throw new Error("videojs not found");(t=videojs).getPlugin(e)||t.registerPlugin(e,function(e){var r=t.mergeOptions(e);if(r.enabled){var i=""+r.developerKey+Math.round(1e7*Math.random());this.qanalytics=function(e){var t=new XMLHttpRequest;t.open("POST",r.analyticsEndpoint),t.setRequestHeader("Content-type","application/json");var o={event:e.event,payload:e.payload,clientTime:new Date,developerKey:r.developerKey,clientId:i},n=JSON.stringify(o);qlog("Sending analytics event: "+n),t.send(n)}}else this.qanalytics=this.qanalytics||function(){}})}(),function(){"use strict";var n,r,e="qencodeControlBar";if(void 0===window.videojs)throw new Error("videojs not found");n=window,(r=videojs).getPlugin(e)||r.registerPlugin(e,function(e){var t=r.mergeOptions(e);if(void 0===n.qencodeCssRegistry)throw new Error("CSS registry not found");var o="rgba(0,0,0,0)";void 0!==t.backgroundColor&&(o=qColorAlphaToRGBA(t.backgroundColor,t.backgroundOpacity)),n.qencodeCssRegistry.appendRule(".video-js .vjs-control-bar",t.instanceId,{"background-color":o}),n.qencodeCssRegistry.appendRule(".vjs-menu li.vjs-selected, .vjs-menu li.vjs-selected:focus, .vjs-menu li.vjs-selected, .js-focus-visible .vjs-menu li.vjs-selected:hover",t.instanceId,{"background-color":o,color:"white"}),n.qencodeCssRegistry.appendRule(".vjs-menu li.vjs-selected, .vjs-menu li.vjs-selected:focus, .vjs-menu li.vjs-selected:hover, .js-focus-visible .vjs-menu li.vjs-selected:hover",t.instanceId,{opacity:"0"})})}(),function(){"use strict";var t="qencodeCustomButton";if(void 0===window.videojs)throw new Error("videojs not found");!function(n){var o=n.getComponent("Component"),e=n.extend(o,{constructor:function(e,t){o.apply(this,arguments),t.imgUrl&&this.updateImageUrl(t.imgUrl),t.href&&this.updateHref(t.href)},createEl:function(){return this.container=n.dom.createEl("div",{className:"qencode-custom-button"}),this.a=n.dom.createEl("a",{className:"qencode-custom-button-link"}),this.img=n.dom.createEl("img",{className:"qencode-custom-buttom-img"}),n.dom.appendContent(this.a,this.img),n.dom.appendContent(this.container,this.a),this.container},updateImageUrl:function(e){n.dom.setAttribute(this.img,"src",e)},updateHref:function(e){n.dom.setAttribute(this.a,"href",e)}});n.registerComponent("CustomButton",e);n.getPlugin(t)||n.registerPlugin(t,function(e){var t=n.mergeOptions(e),o=this;if(void 0===window.qencodeCssRegistry)throw new Error("CSS registry not found");window.qencodeCssRegistry.appendRule(".video-js .qencode-custom-button",t.instanceId,{transition:"all 0.3s",position:"absolute",display:"block",width:"15%",right:"0",bottom:"3em",opacity:"0.4","background-color":"black",padding:"0.4em"}),window.qencodeCssRegistry.appendRule(".video-js .qencode-custom-button img",t.instanceId,{width:"100%"}),window.qencodeCssRegistry.appendRule(".video-js .qencode-custom-button:hover,.video-js .qencode-custom-button:hover",t.instanceId,{opacity:"0.9"}),o.ready(function(){o.addChild("CustomButton",{href:t.href,imgUrl:t.imgUrl})})})}(videojs)}(),function(){"use strict";var a,e="qencodeQualitySelector";if(void 0===window.videojs)throw new Error("videojs not found");(a=videojs).getPlugin(e)||a.registerPlugin(e,function(e){var o=this;if(o.qualityLevels){var n=a.getComponent("MenuItem"),s=a.extend(n,{constructor:function(e,t){this._player=e,this._qualityLevel=t.qualityLevel,t.selectable=!0,n.call(this,e,t),this.addClass("vjs-quality-item"),t.qualityLevel&&720<=t.qualityLevel.height&&this.addClass("vjs-quality-item--hd"),this._player.on("videoqualitychange",a.bind(this,this.update))}});s.prototype._enableMyQualityLevel=function(){for(var e=this._player.qualityLevels(),t=0;t<e.length;t++){var o=e[t];o.enabled=null===this._qualityLevel||o.id===this._qualityLevel.id}this._player._selectedLevel=this._qualityLevel,this._player.trigger("videoqualitychange")},s.prototype.handleClick=function(e){n.prototype.handleClick.call(this,e),this._enableMyQualityLevel()},s.prototype.update=function(){this.el_&&this.selected(this._qualityLevel===this._player._selectedLevel)},n.registerComponent("QualityMenuItem",s);var r=a.getComponent("MenuButton"),i=a.extend(r,{constructor:function(e,t){this.label=document.createElement("span"),this._qualityItems=[],this._player=e,r.call(this,e,t),this.el().setAttribute("aria-label","Video quality"),this.el().setAttribute("id","video_quality"),this.controlText("Video quality"),this.el().appendChild(this.label)}});i.prototype.addQualityLevel=function(e){this._qualityItems.push(e),this.update()},i.prototype._sortQualityItems=function(){this._qualityItems.sort(function(e,t){return e.height<t.height?-1:e.height>t.height?1:e.bitrate<t.bitrate?-1:e.bitrate>t.bitrate?1:0})},i.prototype.createItems=function(){function o(e){return" ("+function(e){if(e<1e3)return""+e;for(var t=2;t<8;t++)if(e<Math.pow(1e3,t))return Math.round(e/Math.pow(1e3,t-1)*10)/10+"kMGTPE"[t-2];return""+e}(e.bitrate)+")"}function e(e){for(var t=0;t<e.length;t++)for(var o=t+1;o<e.length;o++)if(e[t].height===e[o].height)return!0;return!1}function t(e,t){return e.height+"p"+(t?o(e):"")}addToTestJig(o),addToTestJig(e),addToTestJig(t);var n=[];this._sortQualityItems();for(var r=e(this._qualityItems),i=[],a=this._qualityItems.length-1;0<=a;a--)i.push(this._qualityItems[a]);for(var l in this._qualityItems=i,this._qualityItems)n.push(new s(this._player,{label:t(this._qualityItems[l],r),src:void 0,selected:!1,qualityLevel:this._qualityItems[l]}));return n.push(new s(this._player,{label:"Auto",src:void 0,selected:!0,qualityLevel:null})),n},i.prototype.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-quality-button"},i.prototype.buildWrapperCSSClass=function(){return r.prototype.buildWrapperCSSClass.call(this)+" vjs-quality-wrapper"},r.registerComponent("QualityMenuButton",i),o.ready(function(){if(o.qualityLevels){o._selectedLevel=null;var e=o.qualityLevels(),t=new i(o,{name:"QualityMenuButton"});o.getChild("ControlBar").addChild(t),o.controlBar.qualityMenuButton=o.controlBar.el_.insertBefore(t.el_,o.controlBar.getChild("QencodeSettingsButton").el_),o.controlBar.qualityMenuButton=t,e.on("addqualitylevel",function(e){t.addQualityLevel(e.qualityLevel)})}})}})}(),function(){"use strict";var o,e="qencodeFastNavButton";if(void 0===window.videojs)throw new Error("videojs not found");(o=videojs).getPlugin(e)||(console.log("registrando o plugin: "+e),o.registerPlugin(e,function(e){var i=this,t=o.getComponent("MenuButton"),a=o.extend(t,{constructor:function(n,e){var r=this;r.buttonType=e.buttonType?e.buttonType:"",t.call(r,n,e),this.on("click",function(){var e=r.buttonType,t=n.currentTime()+10*("ff"===e?1:-1);n.currentTime(t)}),this.on("touchend",function(e){e.preventDefault();var t=r.buttonType,o=n.currentTime()+10*("ff"===t?1:-1);n.currentTime(o)})}});a.prototype.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-fast-nav-"+this.buttonType+"-button"},a.prototype.buildWrapperCSSClass=function(){return t.prototype.buildWrapperCSSClass.call(this)+" vjs-fast-nav-"+this.buttonType+"-wrapper"},t.registerComponent("FastNavButton",a),i.ready(function(){try{var e={},t={};e.buttonType="rew",e.name="RewindButton",t.buttonType="ff",t.name="FastForwardButton";var o=new a(i,e),n=new a(i,t),r=i.getChild("ControlBar");r.addChild(o),r.addChild(n),i.controlBar.rewindButton=i.controlBar.el_.insertBefore(o.el_,i.controlBar.getChild("VolumePanel").el_),i.controlBar.ffButton=i.controlBar.el_.insertBefore(n.el_,i.controlBar.getChild("VolumePanel").el_),i.controlBar.rewindNavButton.dispose=function(){this.parentNode.removeChild(this)},i.controlBar.ffNavButton.dispose=function(){this.parentNode.removeChild(this)}}catch(e){console.log("Exception: ",e)}})}))}(),function(){"use strict";var e,t="qencodeShareButton";if(void 0===window.videojs)throw new Error("videojs not found");(e=videojs).getPlugin(t)||e.registerPlugin(t,function(n){var p=this,r=e.getComponent("MenuButton"),t=e.extend(r,{constructor:function(e,t){var o=this;r.call(o,e,t),o.initializeElements(n),o.player=e,o.on("click",function(){o.showSharePanel()}),o.on("touchend",function(e){e.preventDefault(),o.showSharePanel()})}});t.prototype.initializeElements=function(e){function t(e){""!==e&&window.open(e,"_blank").focus()}var o=this,n=(e.shareUrl,e.twitter||""),r=e.facebook||"",i=document.createElement("p");i.setAttribute("class","qencode-share-overlay-title"),i.innerHTML="Share:";var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("class","qencode-share-overlay-link"),a.setAttribute("readonly",!0),a.value=e.shareUrl;var l=document.createElement("div");l.setAttribute("class","qencode-share-overlay-buttons-container");var s=document.createElement("button");s.setAttribute("class","action-button copy-button icon-docs"),s.addEventListener("click",function(e){a.focus(),a.select();try{document.execCommand("copy"),console.log("successful")}catch(e){console.log("Error copying to clipboard",e)}});var c=document.createElement("button");c.setAttribute("class","action-button twitter-button icon-twitter"),c.addEventListener("click",t.bind(o,n));var d=document.createElement("button");d.setAttribute("class","action-button facebook-button icon-facebook"),d.addEventListener("click",t.bind(o,r));var u=document.createElement("button");u.setAttribute("class","close-button"),u.addEventListener("click",o.hideSharePanel.bind(o)),l.appendChild(s),l.appendChild(c),l.appendChild(d);var f=document.createElement("div");f.setAttribute("class","qencode-share-overlay-container"),f.addEventListener("click",function(e){e.target.closest(".action-button")||e.target.closest(".qencode-share-overlay-link")||o.hideSharePanel()}),f.appendChild(i),f.appendChild(a),f.appendChild(l),f.appendChild(u),p.el_.appendChild(f),o.overlayContainer=f},t.prototype.showSharePanel=function(){var t=this;t.windowCloseListener=t.windowCloseListener||function(e){"Escape"!==e.key&&"Esc"!==e.key||t.hideSharePanel()},window.addEventListener("keydown",t.windowCloseListener),t.overlayContainer.style.visibility="visible",t.overlayContainer.focus()},t.prototype.hideSharePanel=function(){this.overlayContainer.style.visibility="hidden",window.removeEventListener("keydown",this.windowCloseListener)},t.prototype.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-qencode-share-button"},t.prototype.buildWrapperCSSClass=function(){return r.prototype.buildWrapperCSSClass.call(this)+" vjs-qencode-share-button-wrapper"},r.registerComponent("QencodeShareButton",t),p.ready(function(){var e=new t(p,{name:"QencodeShareButton"});p.getChild("ControlBar").addChild(e),p.controlBar.qencodeShareButton=p.controlBar.el_.insertBefore(e.el_,p.controlBar.getChild("QencodeSettingsButton").el_),p.controlBar.qencodeShareButton=e})})}(),function(){"use strict";var i,e="qencodeSettingsButton";if(void 0===window.videojs)throw new Error("videojs not found");(i=videojs).getPlugin(e)||i.registerPlugin(e,function(e){var C=this,a=!1,B=!1,_=!1;C.on("canplay",function(e){console.log("____PLAYER CAN PLAY!!!"),console.log("__________________audioTrackList.tracks_.length____________");var t=C.controlBar.getChild("PlaybackRateMenuButton"),o=C.controlBar.getChild("SubsCapsButton"),n=C.controlBar.getChild("QualityMenuButton"),r=C.controlBar.getChild("AudioTrackButton"),i=C.controlBar.getChild("QencodeSettingsButton"),a=C.audioTracks();function l(e){e.preventDefault(),t.unpressButton(),i.pressButton()}console.log(a.tracks_.length);for(var s=0;s<t.menu.children().length;s++)t.menu.children()[s].on("click",l),t.menu.children()[s].on("touchend",l);for(var c=0;c<o.items.length;c++)o.items[c].on("click",l),o.items[c].on("touchend",l);for(var d=0;d<n.items.length;d++)n.items[d].on("click",l),n.items[d].on("touchend",l);for(var u=0;u<r.items.length;u++)r.items[u].on("click",l),r.items[u].on("touchend",l);if(!_){var f=i.el_.querySelector("li[data-selected-item='QualityMenuButton']"),p=document.createElement("span");p.setAttribute("class","vjs-selected-menu-item");var v=n.el_.querySelector(".vjs-menu-item.vjs-selected > .vjs-menu-item-text").innerHTML;p.innerHTML=v,f.appendChild(p);var h=i.el_.querySelector("li[data-selected-item='SubsCapsButton']"),m=document.createElement("span");m.setAttribute("class","vjs-selected-menu-item"),v=o.el_.querySelector(".vjs-menu-item.vjs-selected > .vjs-menu-item-text").innerHTML,m.innerHTML=v,h.appendChild(m);var g=i.el_.querySelector("li[data-selected-item='PlaybackRateMenuButton']"),y=document.createElement("span");if(y.setAttribute("class","vjs-selected-menu-item"),v=t.el_.querySelector(".vjs-menu-item.vjs-selected > .vjs-menu-item-text").innerHTML,y.innerHTML=v,g.appendChild(y),0<a.tracks_.length){var b=i.el_.querySelector("li[data-selected-item='AudioTrackButton']"),q=document.createElement("span");q.setAttribute("class","vjs-selected-menu-item"),v=r.el_.querySelector(".vjs-menu-item.vjs-selected > .vjs-menu-item-text").innerHTML,q.innerHTML=v,b.appendChild(q)}a.tracks_.length<2&&(i.el_.querySelector("li[data-selected-item='AudioTrackButton']").style.display="none");var w=[];["PlayToggle","RewindButton","FastForwardButton","VolumePanel","QencodeShareButton","QencodeSettingsButton","FullscreenToggle"].forEach(function(e){var t=C.controlBar.getChild(e);t&&w.push(t)}),w.forEach(function(e){e.on("mouseenter",function(){for(var e=0;e<w.length;e++)w[e].addClass("vjs-control--inactive")}),e.on("mouseleave",function(){for(var e=0;e<w.length;e++)w[e].removeClass("vjs-control--inactive")})})}C.textTracks().addEventListener("change",function(){v=o.el_.querySelector(".vjs-menu-item.vjs-selected > .vjs-menu-item-text").innerHTML,i.el_.querySelector("li[data-selected-item='SubsCapsButton'] > .vjs-selected-menu-item").innerHTML=v}),C.on("videoqualitychange",function(){v=n.el_.querySelector(".vjs-menu-item.vjs-selected > .vjs-menu-item-text").innerHTML,i.el_.querySelector("li[data-selected-item='QualityMenuButton'] > .vjs-selected-menu-item").innerHTML=v,n.el_.querySelector(".vjs-menu-item.vjs-selected.vjs-quality-item--hd")?i.addClass("vjs-video-quality--hd"):i.removeClass("vjs-video-quality--hd")}),i.on("mouseover",function(){B=!0}),t.on("mouseover",function(){B=!0}),o.on("mouseover",function(){B=!0}),n.on("mouseover",function(){B=!0}),r.on("mouseover",function(){B=!0}),i.on("mouseout",function(){B=!1}),t.on("mouseout",function(){B=!1}),o.on("mouseout",function(){B=!1}),n.on("mouseout",function(){B=!1}),r.on("mouseout",function(){B=!1}),_=!0}),C.on("ratechange",function(e){C.controlBar.getChild("QencodeSettingsButton").el_.querySelector("li[data-selected-item='PlaybackRateMenuButton'] > .vjs-selected-menu-item").innerHTML=C.playbackRate()+"x"});var o=C.audioTracks();o.addEventListener("change",function(){for(var e=0;e<o.length;e++){var t=o[e];if(t.enabled)return void(C.controlBar.getChild("QencodeSettingsButton").el_.querySelector("li[data-selected-item='AudioTrackButton'] > .vjs-selected-menu-item").innerHTML=t.label)}}),C.on("userinactive",function(e){var t=C.controlBar.getChild("PlaybackRateMenuButton"),o=C.controlBar.getChild("SubsCapsButton"),n=C.controlBar.getChild("QualityMenuButton"),r=C.controlBar.getChild("AudioTrackButton"),i=C.controlBar.getChild("QencodeSettingsButton");B?C.userActive(!0):(a=!1,t.unpressButton(),o.unpressButton(),n.unpressButton(),r.unpressButton(),i.unpressButton())}),console.log("===========qencodeSettingsButton==================");var n=i.getComponent("MenuButton"),r=i.getComponent("MenuItem"),t=i.extend(n,{constructor:function(e,t){this._settingsItems=[],this._player=e,n.call(this,e,t),this.controlText("Settings"),this._initialize()}});t.prototype.handleClick=function(e){console.log("Settings button clicked"),console.log("player.controlBar ",C.controlBar);var t=C.controlBar.getChild("PlaybackRateMenuButton"),o=C.controlBar.getChild("SubsCapsButton"),n=C.controlBar.getChild("QualityMenuButton"),r=C.controlBar.getChild("AudioTrackButton");this.buttonPressed_?this.unpressButton():this.pressButton(),a&&this.unpressButton(),t.unpressButton(),o.unpressButton(),r.unpressButton(),n.unpressButton(),a=!1};var l=i.extend(r,{constructor:function(t,e){var o=this;r.call(o,t,e),o.addClass("vjs-settings-item"),o.setAttribute("data-selected-item",e.controlBarComponent),o.controlBarComponent=e.controlBarComponent,o.itemMenu=e.itemMenu,o.el_.addEventListener("touchstart",function(e){e.preventDefault()}),o.el_.addEventListener("touchend",function(e){e.preventDefault(),a=!0,t.controlBar.getChild(o.itemMenu).unpressButton(),t.controlBar.getChild(o.controlBarComponent).pressButton()}),o.el_.addEventListener("click",function(){console.log("Settings menu item clicked"),a=!0,t.controlBar.getChild(o.itemMenu).unpressButton(),t.controlBar.getChild(o.controlBarComponent).pressButton()})}});C.on("mouseleave",function(){C.userActive(!1)}),r.registerComponent("SettingsMenuItem",l),t.prototype._initialize=function(){C.ready(function(){window.addEventListener("click",function(e){if(null==event.target.closest(".vjs-menu-button")){var t=C.controlBar.getChild("PlaybackRateMenuButton"),o=C.controlBar.getChild("SubsCapsButton"),n=C.controlBar.getChild("AudioTrackButton"),r=C.controlBar.getChild("QencodeSettingsButton");t.unpressButton(),o.unpressButton(),n.unpressButton(),r.unpressButton(),a=!1}}),console.log("Add event to close playback rate menu when rate is selected"),C.on("ratechange",function(e){console.log("Playback rate was changed!"),C.controlBar.getChild("PlaybackRateMenuButton").unpressButton()});var e=C.controlBar.getChild("PlaybackRateMenuButton").menu,t=new l(C,{label:"Playback speed",controlBarComponent:"QencodeSettingsButton",itemMenu:"PlaybackRateMenuButton"});e.addItem(t),t=e.el_.firstElementChild.insertBefore(t.el_,e.el_.firstElementChild.firstElementChild),console.log("Adding back to settings menu items to menus");var o=C.controlBar.getChild("SubsCapsButton").menu,n=new l(C,{label:"Subtitles/CC",controlBarComponent:"QencodeSettingsButton",itemMenu:"SubsCapsButton"});o.addItem(n),n=o.el_.firstElementChild.insertBefore(n.el_,o.el_.firstElementChild.firstElementChild),console.log("----------------------------------------------------------------------"),C.controlBar.getChild("QualityMenuButton"),console.log(C.controlBar.getChild("SubsCapsButton")),console.log(C.controlBar.getChild("QualityMenuButton")),console.log("----------------------------------------------------------------------"),new l(C,{label:"Back",controlBarComponent:"QencodeSettingsButton"});var r=C.controlBar.getChild("VolumePanel"),i=C.controlBar.getChild("ProgressControl");r.on("mouseover",function(){i.hide()}),r.on("mouseout",function(){i.show()})})},t.prototype.createItems=function(){var e=[];return console.log("CREATING MENU ITEMS......"),e.push(new l(this._player,{label:"Audio track",controlBarComponent:"AudioTrackButton",itemMenu:"QencodeSettingsButton"})),e.push(new l(this._player,{label:"Playback speed",controlBarComponent:"PlaybackRateMenuButton",itemMenu:"QencodeSettingsButton"})),e.push(new l(this._player,{label:"Subtitles/CC",controlBarComponent:"SubsCapsButton",itemMenu:"QencodeSettingsButton"})),e.push(new l(this._player,{label:"Video quality",controlBarComponent:"QualityMenuButton",itemMenu:"QencodeSettingsButton"})),e},t.prototype.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-qencode-settings-button"},t.prototype.buildWrapperCSSClass=function(){return n.prototype.buildWrapperCSSClass.call(this)+" vjs-qencode-settings-button-wrapper"},n.registerComponent("QencodeSettingsButton",t),C.ready(function(){var e=new t(C,{name:"QencodeSettingsButton"});C.getChild("ControlBar").addChild(e),C.controlBar.qencodeSettingsButton=C.controlBar.el_.insertBefore(e.el_,C.controlBar.getChild("fullscreenToggle").el_),C.controlBar.qencodeSettingsButton=e})})}(),function(){"use strict";var n="qencodeSettingsMenuControls";if(void 0===window.videojs)throw new Error("videojs not found");!function(e){var o=e.getComponent("Component"),t=e.extend(o,{constructor:function(e,t){o.apply(this,arguments)}});e.registerComponent("QencodeSettingsMenuControls",t);e.getPlugin(n)||e.registerPlugin(n,function(e){if(void 0===window.qencodeCssRegistry)throw new Error("CSS registry not found");this.ready(function(){console.log("add menu controls now")})})}(videojs)}(),function(){"use strict";var t="qencodeTitleBar";if(void 0===window.videojs)throw new Error("videojs not found");!function(n){var o=n.getComponent("Component"),e=n.extend(o,{constructor:function(e,t){o.apply(this,arguments),t.text&&this.updateTextContent(t.text)},createEl:function(){return n.dom.createEl("div",{className:"qencode-title-bar"})},updateTextContent:function(e){"string"!=typeof e&&(e=""),n.dom.emptyEl(this.el()),n.dom.appendContent(this.el(),e)}});n.registerComponent("TitleBar",e);n.getPlugin(t)||n.registerPlugin(t,function(e){var t=n.mergeOptions(e),o=this;if(void 0===window.qencodeCssRegistry)throw new Error("CSS registry not found");window.qencodeCssRegistry.appendRule(".qencode-title-bar",t.instanceId,{color:"white",display:"none","font-size":"18px",padding:"15px 20px",position:"absolute",top:"0",left:"0",width:"100%",transition:"visibility 0.1s, opacity 0.1s"}),window.qencodeCssRegistry.appendRule(".vjs-has-started .qencode-title-bar",t.instanceId,{display:"block",visibility:"visible",opacity:"1",transition:"visibility 0.1s, opacity: 0.1s"}),window.qencodeCssRegistry.appendRule(".vjs-has-started.vjs-user-inactive.vjs-playing .qencode-title-bar",t.instanceId,{visibility:"visible",opacity:"0",transition:"visibility 0.5s, opacity 0.5s"}),window.qencodeCssRegistry.appendRule(".vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar",t.instanceId,{display:"none !important"}),o.ready(function(){if(!n.getComponent("TitleBar"))throw new Error("TitleBar component not found");o.addChild("TitleBar",{text:t.text})})})}(videojs)}(),function(){"use strict";var t="qencodeTimeline";if(void 0===window.videojs)throw new Error("videojs not found");!function(n){n.getPlugin(t)||n.registerPlugin(t,function(e){var t=n.mergeOptions(e),o=this;if(void 0===window.qencodeCssRegistry)throw new Error("CSS registry not found");o.ready(function(){new r(o,t);console.log("timeline controlBar",o.controlBar)})});var e=n.getComponent("ControlBar"),r=n.extend(e);e.registerComponent("TimelineControlBar",r)}(videojs)}(),function(){"use strict";function m(e,t){var o={qencodeSettingsButton:{},qencodeSettingsMenuControls:{},qencodeQualitySelector:{},qencodeFastNavButton:{}};if(void 0!==e.social){var n={};n.shareUrl=e.social.shareUrl,n.twitter=e.social.twitter,n.facebook=e.social.facebook,o.qencodeShareButton=n}if(e.qencodeBigPlayButton&&(o.qencodeBigPlayButton={instanceId:t}),e.titleBar){if("string"!=typeof e.titleBar.text||""===e.titleBar.text.trim())throw new Error("The 'titleBar' attribute is optional but, once informed, the attribute 'titleBar.text' must be informed as a string");o.qencodeTitleBar={instanceId:t,text:e.titleBar.text}}if(e.customButton){if("string"!=typeof e.customButton.imgUrl||""===e.customButton.imgUrl.trim())throw new Error("The 'customButton' attribute is optional but, once informed, the attribute 'customButton.imgUrl' must be informed as a string");if("string"!=typeof e.customButton.href||""===e.customButton.href.trim())throw new Error("The 'customButton' attribute is optional but, once informed, the attribute 'customButton.href' must be informed as a string");o.qencodeCustomButton={instanceId:t,imgUrl:e.customButton.imgUrl,href:e.customButton.href}}if(e.controlBar){if(void 0!==e.controlBar.backgroundColor&&"string"!=typeof e.controlBar.backgroundColor)throw new Error("The 'controlBar.backgroundColor' parameter is optional but, once informed, must be a string");if(void 0!==e.controlBar.backgroundOpacity){if("number"!=typeof e.controlBar.backgroundOpacity)throw new Error("The 'controlBar.backgroundOpacity' parameter is optional but, once informed, must be a number");if(e.controlBar.backgroundOpacity<0||1<e.controlBar.backgroundOpacity)throw new Error("The 'controlBar.backgroundOpacity' parameter, when informed, must be a number between 0 and 1 (inclusive)")}var r=e.controlBar.backgroundColor||"black",i=e.controlBar.backgroundOpacity||.4;o.qencodeControlBar={instanceId:t,backgroundColor:r,backgroundOpacity:i}}return o.qencodeAnalytics={instanceId:t},o.qencodeAnalytics.enabled=!!e.analytics&&!!e.analytics.enabled,o.qencodeAnalytics.developerKey=void 0===e.developerKey?window.qencode_default_developer_key:e.developerKey,o.qencodeAnalytics.analyticsEndpoint=void 0===e.analytics||void 0===e.analytics.endpoint?window.qencode_default_analytics_endpoint:e.analytics.endpoint,o}function g(e){if(void 0===e.videoSources)throw new Error("The 'videoSources' parameter is mandatory");var t=[];if("string"==typeof e.videoSources){if(""===e.videoSources.trim())throw new Error("The 'videoSources' attribute must not be an empty string");t.push({src:e.videoSources})}else if("object"==typeof e.videoSources&&e.videoSources.constructor===Array)for(var o in e.videoSources){var n=e.videoSources[o];if(void 0===n.src)throw new Error("The 'src' attribute must be defined in every informed video source");t.push({src:n.src,type:n.type,label:n.label,withCredentials:n.withCredentials})}else{if("object"!=typeof e.videoSources||e.videoSources.constructor!==Object)throw new Error("The 'videoSources' parameter contains a value of an unsupported type: '"+typeof e.videoSources+"'");if(void 0===e.videoSources.src)throw new Error("When containing an object, the 'videoSources' parameter must have a 'src' attribute");t.push({src:e.videoSources.src,type:e.videoSources.type,label:e.videoSources.label,withCredentials:e.videoSources.withCredentials})}return t=function(e,t){var o,n,r,i,a=[],l=!0;for(o in e)r=(n=e[o]).type||s(n.src),(i={}).src=n.src,i.type=r,i.withCredentials=void 0!==n.withCredentials?n.withCredentials:void 0!==t&&t,void 0!==n.label&&n.label&&(i.label=n.label,i.selected=l),a.push(i),l=!1;return a}(t,e.withCredentials)}function y(e){function t(e,t){if(void 0===e[t])throw new Error("The '"+paramName+"' attribute is mandatory for all text tracks")}if(void 0!==e.textTracks){var o;if("object"==typeof e.textTracks&&e.textTracks.constructor===Array)o=e.textTracks;else{if("object"!=typeof e.textTracks||e.textTracks.constructor!==Object)throw new Error("'textTracks' must be either Arrays or Objects");o=[e.textTracks]}for(var n=0;n<o.length;n++){var r=o[n];if(void 0!==r&&(t(r,"src"),t(r,"label"),t(r,"language"),void 0!==r.kind&&"captions"!==r.kind))throw new Error("Currently, only text tracks of the 'captions' kind are supported")}return{tracks:o}}}function s(e){if(void 0===e||""===e.trim())throw new Error("'src' must be defined");var t=e.lastIndexOf(".");if(-1===t||t>=e.length-1)return"application/x-mpegURL";switch(e.substring(t+1,e.length)){case"m3u8":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return"video/mp4";case"mkv":return"video/x-matroska";case"ts":return"video/MP2T";case"mov":return"video/quicktime";case"webm":return"video/webm";default:return"application/x-mpegURL"}}function b(e){if(void 0===e.videoSources)throw new Error("The mandatory 'videoSources' attribute hasn't been found")}function q(e){var t={params:e,plugins:void 0,srcs:void 0,exception:void 0};try{b(e),t.plugins=m(e),t.srcs=g(e)}catch(e){t.exception=e.message}return t}function e(e,t,o,n,r){if("test"!==n){var i=this;i._instanceId=""+Math.round(1e6*Math.random()),i._trackedTime={begin:0,end:0},function(e){if("string"!=typeof e)throw new Error("A string was expected as a valid DIV container element ID");var t=document.getElementById(e);if(!t||"DIV"!==t.tagName.toUpperCase())throw new Error("A DIV element with the informed ID hasn't been found")}(e),b(t);var a=document.getElementById(e);a.style.visibility="hidden";var l,s=function(e,t){var o="qencode-video-element"+t,n=document.createElement("video");return n.setAttribute("id",o),n.setAttribute("class","video-js"),n.setAttribute("nocontrols","nocontrols"),n.setAttribute("preload","auto"),n.setAttribute("width","640"),n.setAttribute("height","264"),e.appendChild(n),o}(a,i._instanceId),c=m(t,i._instanceId),d=g(t),u=y(t),f={controls:!0,playbackRates:[.5,1,1.5,2],controlBar:{volumePanel:{inline:!1}},plugins:c,html5:{hls:{overrideNative:!0},nativeCaptions:!1,nativeAudioTracks:!1,nativeVideoTracks:!1}};return window.videojsOptions=f,window.sourcesConfig=d,void 0!==t.bypassOptions&&t.bypassOptions.constructor===Object&&(f=videojs.mergeOptions(f,t.bypassOptions)),i._loadStartTime=void 0,i._player=videojs(s,f,function(){if(window.qencodeCssRegistry.load(i._instanceId),this.src(d),void 0!==u)for(var e=0;e<u.tracks.length;e++)this.addRemoteTextTrack(u.tracks[e],!0);var t=this.contentEl();t.className+=" vjs-big-play-centered",t.className+=" qencode-player-instance-"+i._instanceId,a.style.visibility="visible","function"==typeof o&&o.bind(i).call(),i._loadStartTime=new Date}),l=d,i._player.qanalytics({event:"IMPRESSION",payload:{userAgent:window.navigator.userAgent,sources:l}}),window.addEventListener("beforeunload",function(e){window.qencodePlayed||i._player.qanalytics({event:"BOUNCE"})}),window.addEventListener("load",function(e){var t=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart;i._player.qanalytics({event:"PAGELOADTIME",payload:t})}),this._player.on("play",function(e){window.qencodePlayed||(window.qencodePlayed=!0,i._player.qanalytics({event:"FIRSTPLAY"}))}),this._player.on("error",function(e){i._player.qanalytics({event:"FAILURE"})}),this._player.on("timeupdate",function(e){var t=i._player.currentTime(),o=t>i._trackedTime.end+1,n=t<i._trackedTime.end,r=i._trackedTime.end-i._trackedTime.begin;o||n||5<r?(function(){i._trackedTime.begin>i._trackedTime.end&&(i._trackedTime.begin=i._trackedTime.end);if(i._trackedTime.begin===i._trackedTime.end)return;i._player.qanalytics({event:"WATCHTIME",payload:i._trackedTime});var e=i._trackedTime.end;i._trackedTime={begin:e,end:e}}(),i._trackedTime={begin:t,end:t}):i._trackedTime.end=t}),this._player.on("ended",function(e){}),this._player.on("canplay",function(e){if(i._loadStartTime){var t=new Date-i._loadStartTime;console.log("videoLoadTime",t),i._player.qanalytics({event:"VIDEOLOADTIME",paypload:t})}}),i}if("function"!=typeof r)throw new Error("When in 'test' mode, the testReadyFn callback must be provided");var p=[],v=[];for(var h in"object"==typeof t&&t.constructor===Array?p=t:"object"==typeof t&&t.constructor===Object&&(p=[t]),p)v.push(q(p[h]));r(v)}addToTestJig(m),addToTestJig(g),addToTestJig(y),e.prototype.dispose=function(){if(void 0===this._player)throw new Error("The player hasn't been initialized yet");this._player.dispose()},e.prototype.getInstanceId=function(){return this._instanceId},window.QencodePlayer=e}();
//# sourceMappingURL=qencode-player.min.js.map