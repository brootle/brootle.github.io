<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />

    <link rel="icon" type="image/png" href="img/favicon.png">    

    <link href="https://necolas.github.io/normalize.css/4.1.1/normalize.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  
    
    <link rel="stylesheet" href="css/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>            

    <link href="css/m1__variables.css" rel="stylesheet" />
    <link href="css/m1__template.css" rel="stylesheet" />
    <link href="css/m1__elements.css" rel="stylesheet" />

    <title>MEMO</title>
</head>
<body class="m1-page">

    <nav class="m1-nav">

        <div class="m1-container">

            <div>
                <a href="./"><img src="img/logo.png" alt=""></a>
            </div>

            <div class="m1-top-menu-container">
                <div id="top-menu" class="m1-top-menu">
                    <div class="m1-menu-items--left">
                        <a class="m1-menu-item" href="./">Customer</a>    
                        <a class="m1-menu-item m1-menu-item--active" href="./inventory.html">Inventory</a>    
                        <a class="m1-menu-item" href="./memo.html">Memo</a>                                            
                    </div>
                    <div class="m1-menu-items--right">
                                                       
                    </div>
                </div>
            </div>
                                   
        </div>

    </nav> 

    <main class="m1-page-content">
        <div class="m1-container">
            <div class="m1-status-links">
                <a href="./inventory.html">Inventory</a> > <a href="" class="m1-status-links__current-link">Edit Inventory</a>
            </div>   
            
            <div class="m1-edit-form-container">   
                <div class="m1-form-header">
                    <h1>Edit Inventory</h1>  
                    <div class="m1-buttons-container">
                        <button class="m1-button m1-button--narrow m1-button--danger">Delete item</button>
                    </div>  
                </div> 
                
                
                <div class="m1-edit-form">

                    <div class="m1-input-container">
                        <label class="m1-label">Stock ID</label>
                        <input class="m1-input" type="text" value="WY99981723982" disabled>
                    </div>

                    <div class="m1-input-container">
                        <label class="m1-label">Product type</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Watch</option>
                                <option value="2">Ring</option>
                                <option value="3">Bracelet</option>
                            </select>
                        </div>
                    </div>          
                    
                    <div class="m1-input-container">
                        <label class="m1-label">Partner</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Yasha</option>
                                <option value="2">Steve</option>
                                <option value="3">Daniel</option>
                            </select>
                        </div>
                    </div>           
                    


                    <div class="m1-input-container">
                        <label class="m1-label">Brand</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Rolex</option>
                                <option value="2">Breguet</option>
                            </select>
                        </div>
                    </div>         
                    
                    <div class="m1-input-container">
                        <label class="m1-label">Model number</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">7727BB/12/9WU</option>
                                <option value="2">8827BB/12/9WU</option>
                                <option value="3">9927BB/12/9WU</option>
                            </select>
                        </div>
                    </div>    
                    
                    <div class="m1-input-container m1-input-container--condition">
                        <label class="m1-label">Condition</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Like New</option>
                                <option value="2">New</option>
                                <option value="3">Used</option>
                            </select>
                        </div>
                    </div>          


                    
                    <div class="m1-input-container">
                        <label class="m1-label">LTR</label>
                        <input class="m1-input" type="text">
                    </div>            
                    
                    <div class="m1-input-container">
                        <label class="m1-label">SKU</label>
                        <input class="m1-input" type="text">
                    </div>     
                    
                    <br>


                    <div class="m1-input-container m1-input-container--cost">
                        <label class="m1-label">Cost</label>
                        <input class="m1-input m1-input--currency" type="text" value="5767">
                    </div>      
                                         
                    
                    <div class="m1-input-container m1-input-container--sale-type">
                        <label class="m1-label">Sale type</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Price/Unit</option>
                            </select>
                        </div>
                    </div>   
                    
                    <div class="m1-input-container m1-input-container--cost-code">
                        <label class="m1-label">Cost code</label>
                        <input class="m1-input" type="text">
                    </div>      
                    
                    <br>


                    <div class="m1-input-container m1-input-container--msrp">
                        <label class="m1-label">MSRP</label>
                        <input class="m1-input m1-input--currency" type="text" value="768768.99">
                    </div>                         
                                        

                    <div class="m1-input-container m1-input-container--date">
                        <label class="m1-label">Date</label>
                        <div class="m1-custom-select">
                            <input class="m1-input m1-input--date" type="text" autocomplete="off" value="Mar 19, 2019">
                        </div>                                               
                    </div>   

                    <div class="m1-input-container m1-input-container--ppr">
                        <label class="m1-label">PPR</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>
                        </div>
                    </div>           

                    <div class="m1-input-container m1-input-container--description">
                        <label class="m1-label">Description</label>
                        <textarea>Some description</textarea>
                    </div>         

                    <div class="m1-input-container m1-input-container--images">
                        <label class="m1-label">Images</label>
                        <div id="images-container" class="m1-input-images-container">   
                            
                            <div class="m1-input m1-input--image">
                                <img src="img/upload/download.jpeg" alt="">
                                <div class="m1-image-button m1-image-button--delete"></div>
                            </div>            
                            
                            <div class="m1-input m1-input--image">
                                <img src="img/upload/download2.jpeg" alt="">
                                <div class="m1-image-button m1-image-button--delete"></div>
                            </div>   
                            
                            <div class="m1-input m1-input--image">
                                <img src="img/upload/download3.jpeg" alt="">
                                <div class="m1-image-button m1-image-button--delete"></div>
                            </div>                               

                            <div class="m1-input m1-input--image m1-input--add-new-image">
                                <label for="file" class="m1-image-button m1-image-button--add"></label>
                                <input id='file' type="file" accept="image/*">
                            </div>              

                        </div>

                        <script>
                            // control images
                            $(function () {
                                // delete current image
                                $('#images-container').click(function(e){
                                    var clickedElement = e.target;
                                    // if we clicked delete butto -> delet current image block
                                    if($(e.target).hasClass('m1-image-button--delete')){
                                        // find parent block -> m1-input--image
                                        $(e.target).closest('.m1-input--image').remove();
                                    }
                                });

                                // add new images on file change
                                $('#file').change(function(e) {
                                    
                                    if(e.target.files[0]){
                                        var path = URL.createObjectURL(e.target.files[0]);                                      
                                        
                                        // create image box with uploaded image by user
                                        $(this).closest('.m1-input--add-new-image').before(`
                                            <div class="m1-input m1-input--image">
                                                <img src="${path}" alt="">
                                                <div class="m1-image-button m1-image-button--delete"></div>
                                            </div>                                         
                                        `);                                      
                                    }

                                });
                            
                            });
                        </script>                            

                    </div>        


                    <div class="m1-input-container">
                        <label class="m1-label">Category</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>
                        </div>
                    </div>     

                    <div class="m1-input-container m1-input-container--size">
                        <label class="m1-label">Size</label>
                        <input class="m1-input" type="text" value="44 mm">
                    </div>           

                    <br>     

                    <div class="m1-input-container">
                        <label class="m1-label">Metal</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Two Tone YG</option>
                            </select>
                        </div>
                    </div>            

                    <div class="m1-input-container">
                        <label class="m1-label">Band</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">President</option>
                            </select>
                        </div>
                    </div>           

                    <br>     


                    <div class="m1-input-container">
                        <label class="m1-label">Dial Color</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">Ice Blue Standard Dial</option>
                            </select>
                        </div>
                    </div>            

                    <div class="m1-input-container">
                        <label class="m1-label">Bezel</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">18k Rose Gold</option>
                            </select>
                        </div>
                    </div>           

                    <br>                
                    
                    <div class="m1-input-container m1-input-container--source">
                        <label class="m1-label">Source</label>
                        <input class="m1-input" type="text">
                    </div>                

                    <br>

                    <div class="m1-input-container">
                        <label class="m1-label">Vendor Doc</label>
                        <div class="m1-custom-select">
                            <select class="m1-select">
                                <option value="1">1</option>
                            </select>
                        </div>
                    </div>  

                    <div class="m1-input-container m1-input-container--date">
                        <label class="m1-label">DOP</label>
                        <div class="m1-custom-select">
                            <input class="m1-input m1-input--date" type="text" autocomplete="off" value="Mar 19, 2019">
                        </div>                                               
                    </div>           
                    
                    <div class="m1-input-container m1-input-container--weight">
                        <label class="m1-label">Weight</label>
                        <input class="m1-input" type="text" value="230 g">
                    </div>          
                    
                    <br>

                    <div class="m1-input-container">
                        <label class="m1-label">Screw Count</label>
                        <input class="m1-input" type="text">
                    </div>  
                    
                    <div class="m1-input-container">
                        <label class="m1-label">Brand Grade</label>
                        <input class="m1-input" type="text">
                    </div>                      


                    <script>
                        $(function () {
                            // format date input
                            $(".m1-input--date").datepicker({
                                dateFormat: "MM d, yy",
                                monthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                                            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]                                                      
                            });      


                            // format currency input

                            // on form load
                            $('.m1-input--currency').each(function() {
                                var inputValue = $(this).val();
                                if(inputValue.includes(".")){
                                    // if number is decimal
                                    // format part before dot
                                    var integerValue = parseInt(inputValue).toString();
                                    $(this).val('$' + integerValue.replace(/[^\dA-Z]/g, '').replace(/\B(?=(\d{3})+(?!\d))/g, ",").trim() + '.' + inputValue.split('.')[1]);

                                } else{
                                    // if the number is not decimal add spaces after thousands
                                    $(this).val('$' + inputValue.replace(/[^\dA-Z]/g, '').replace(/\B(?=(\d{3})+(?!\d))/g, ",").trim());
                                }
                            });
                             
                            // when user inputs value
                            $('.m1-input--currency').on('input', function (e) {

                                if(e.target.value.includes(".")){
                                    // if number is decimal
                                    e.target.value = '$' + e.target.value.replace(/[^0-9.,]/g, '').replace(/(\..*)\./g, '$1').trim();

                                    // allow only two digits after dots
                                    var afterDotDigits = e.target.value.split('.')[1];
                                    if(afterDotDigits.length > 2){
                                        e.target.value = e.target.value.replace(/.$/, '');
                                    }

                                } else{
                                    // if the number is not decimal add spaces after thousands
                                    e.target.value = '$' + e.target.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1').replace(/\B(?=(\d{3})+(?!\d))/g, ",").trim();
                                }
                            });

                        });
                    </script>                        


                </div>

                <div class="m1-align-right">
                    <div class="m1-buttons-container">
                        <button class="m1-button m1-button--light">Cancel</button>
                        <button class="m1-button m1-button--long m1-button--dark">Save</button>
                    </div>                    
                </div>
            </div>                                              
        </div>
    </main>

</body>
</html>